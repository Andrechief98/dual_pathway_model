<launch>


    <rosparam command="load" file="$(find mpc_planner)/config/mpc_params.yaml" />

    <arg name="map_file"                                                default="$(find mpc_planner)/config/maps/map_1.yaml"                         doc="Path to a map .yaml file (required)." />
    <arg name="virtual_walls_map_file"                                  default=""                                           doc="Path to a virtual walls map .yaml file (optional)." />
    <arg name="with_virtual_walls"                                      default="false" />
    <arg name="prefix"                                                  default="" />
    <arg name="namespace"                                               default="$(arg prefix)"                                             doc="Namespace to push all topics into."/>
    <arg name="use_warm_start"                                          default="false" />
    <arg name="penalty"                                                 default="logarithmic" />
    <arg name="high_road_influence"                                     default="0.5" />
    <arg name="test"                                                    default="" />
    <arg name="experiment"                                              default="dynamic" />


    <!-- Nel caso in cui venga specificato un namespace -->
    <group if="$(eval namespace != '')" ns="$(arg namespace)">
        <param name="use_warm_start"                    value="$(arg use_warm_start)" />
        <param name="penalty"                           value="$(arg penalty)" />
        <param name="high_road_influence"               value="$(arg high_road_influence)" />
        <param name="test"                              value="$(arg test)" />
        <param name="experiment"                        value="$(arg experiment)" />
    </group>

    <!-- Nel caso in cui non venga specificato un namespace -->
    <group unless="$(eval namespace != '')">
        <param name="use_warm_start"                    value="$(arg use_warm_start)" />
        <param name="penalty"                           value="$(arg penalty)" />
        <param name="high_road_influence"               value="$(arg high_road_influence)" />
        <param name="test"                              value="$(arg test)" />
        <param name="experiment"                        value="$(arg experiment)" />
    </group>

    <node pkg="dual_pathway_interfaces"         type="optitracker_node.py"              name="optitracker"                      output="screen" />
    <node pkg="low_road"                        type="amygdala_vlm_multifear.py"        name="amygdala"                         output="screen" />
    <node pkg="low_road"                        type="fuzzy_mpc_params_contr.py"        name="fuzzy_mpc_params_contr_node"      output="screen" />
    <node pkg="low_road"                        type="constraints_visualization.py"     name="constraint_visualizer_rviz"       output="screen" />
    <!-- <node pkg="low_road" type="plot_fear_level.py" name="plot_fear_level" output="screen" /> -->

    <node pkg="rviz" type="rviz" name="rviz" args="-d $(find mir_navigation)/rviz/navigation.rviz" output="screen" />
    <!-- <node pkg="high_road" type="cerebral_cortex" name="cerebral_cortex" output="screen"/> -->


</launch>




<!-- Da runnare:
- Launch file
- cerebral cortex nel terminal vs code
- thalamus da terminale linux -->